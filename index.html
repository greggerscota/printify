<html>
<head>
<title>IE Sucks</title>
</head>
<body>
	<form id="testForm">
    	<select id="ddlCreditCards" name="ddlCreditCards" required>
    		<option value="">Select Payment Type</option>
    		<option value="Visa">Visa</option>
    		<option value="MasterCard">MasterCard</option>
    		<option value="Discover">Discover</option>
    		<option value="AmericanExpress">AmericanExpress</option>    		
    	</select>
    	<input type="text" name="txtPaymentSecurityCode" id="txtPaymentSecurityCode" maxlength="4" placeholder="xxx" required="required" title="Please enter a valid Security Code for your Credit Card selection." />
    	<input type="submit" name="btnSubmitOrder" id="btnSubmitOrder" value="Submit Order" />
	</form>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="js/modernizr.min.js"></script>
	<script>
	$(document).ready(function () {
	    Modernizr.load(
	        {
	            test: Modernizr.inputtypes.tel && Modernizr.inputtypes.email && Modernizr.input.pattern && Modernizr.input.required && Modernizr.input.placeholder,
	            nope: 'js/polyfiller.js',
	            complete: function () {
	                if ($.webshims) {
	                    $.webshims.setOptions({
	                        extendNative: false,
	                        waitReady: false
	                    });
	                    $.webshims.polyfill();
	                }
	            }
	        }
	    );
		$(document).on('click', '#btnSubmitOrder', function(){
			$('#testForm').checkValidity();			
		});
		$(document).on('change', '#ddlCreditCards', function(){
			if($(this).val() == "AmericanExpress")
				$('#txtPaymentSecurityCode').attr('pattern', '.{3,3}[0-9]');
			else
				$('#txtPaymentSecurityCode').attr('pattern', '.{2,2}[0-9]');
		});
	});
	</script>
</body>
</html>